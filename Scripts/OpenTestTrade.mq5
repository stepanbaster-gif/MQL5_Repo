#property copyright "Stepan Baster"
#property strict
#include <Trade\Trade.mqh>

// Настройки скрипта
input int      InpMagic = 777;    // Magic должен совпадать с роботом
input double   InpLot   = 0.01;   // Объем сделки

void OnStart()
{
   CTrade trade;
   trade.SetExpertMagicNumber(InpMagic);
   
   double ask = SymbolInfoDouble(_Symbol, SYMBOL_ASK);
   
   // Открываем BUY без SL/TP (робот сам их подхватит в ManagePositions, если нужно)
   if(trade.Buy(InpLot, _Symbol, ask, 0, 0, "TEST TRADE 777"))
   {
      Print("Test trade opened successfully with Magic: ", InpMagic);
   }
   else
   {
      Print("Error opening trade: ", GetLastError());
   }
}